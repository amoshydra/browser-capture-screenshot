---
layout: ../layouts/documents.astro
title: 'Using MDX'
description: 'Lorem ipsum dolor sit amet'
heroImage: '/blog-placeholder-5.jpg'
---

Browser Capture Screenshot utilises the [Element Capture API](https://screen-share.github.io/element-capture) to capture screenshot of a given Element from the page.

```bash
npm install browser-capture-screen
```

import Demo from "../components/Demo.astro";

<Demo
  data-value={`
    import { capture } from "browser-capture-screenshot";

    const screenshot = await capture(demoElement);
    previewElement.src = screenshot;
  `}
/>

<br />
<br />

## Granular controls

`ScreenshotSession` provides more granular controls:

<Demo
  data-value={`
    import { ScreenshotSession } from "browser-capture-screenshot";

    const session = new ScreenshotSession();

    await session.start();

    // capture screenshot 1 second later
    setTimeout(async () => {
      const screenshot = await session.capture(demoElement);
      previewElement.src = screenshot;

      await session.stop();
    }, 1000);
  `}
/>

## Compatibility

This implementation requires the browser to support the following experimental API:

- [`getDisplayMedia`](https://developer.mozilla.org/en-US/docs/Web/API/MediaDevices/getDisplayMedia) with [`prefereCurrentTab`](https://developer.mozilla.org/en-US/docs/Web/API/MediaDevices/getDisplayMedia#prefercurrenttab) options
- [`CropTarget.fromElement()`](https://w3c.github.io/mediacapture-region/#dom-croptarget-fromelement) and [BrowserCaptureMediaStreamTrack.cropTo](https://w3c.github.io/mediacapture-region/#dom-browsercapturemediastreamtrack-cropto)
- [`RestrictionTarget.fromElement()`](https://screen-share.github.io/element-capture/#dom-restrictiontarget-fromelement) and [BrowserCaptureMediaStreamTrack.restrictTo](https://screen-share.github.io/element-capture/#dom-browsercapturemediastreamtrack-restrictto)

## Known issues:
- When using Element Capture API:
  - the target element need to be [eligible for restriction](https://screen-share.github.io/element-capture/#elements-eligible-for-restriction)
  - the target element by default have a black background. If your element is tranparent, it will blend with a black background.
  - The following style is commonly used with using Element Capture API:
      ```css
      .target {
        background-color: white;
        isolation: isolate;
      }
      ``` 
- The capture region need to be visible in the viewport
- System UI (such as context menu) or User Agent widget (i.e. Date Picker, Select option list) will not be captured

## References

References
- https://stackoverflow.com/a/74597490
- https://developer.chrome.com/docs/web-platform/region-capture
- https://developer.chrome.com/docs/web-platform/element-capture

Similar projects
- https://github.com/xataio/screenshot/pull/6
